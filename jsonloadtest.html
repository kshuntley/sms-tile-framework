<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
</head>

<body>
<button class="func-load-file">LOAD</button>
<!-- <input id="tempupload" type="file" > -->
<div id="drawme"></div>

<script 
	src="https://code.jquery.com/jquery-2.2.4.min.js" 
	integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" 
	crossorigin="anonymous"></script>

<script 
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
	integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
	crossorigin="anonymous"></script>

<script src="scripts/commonfunctions.js"></script>
<script src="scripts/buttonclass.js"></script>
<script src="scripts/buttonrowclass.js"></script>	

<script>

	var theModel = ButtonRow.new();
	
	$( ".func-load-file" ).click( function(e) {
		"use strict";
		e.preventDefault();
		$( ".func-load-file" ).after( '<input id="tempupload" type="file" style="margin-left:-9999px">' );
		
		$( "#tempupload" ).click();
		
		$( "body" ).on("change", "#tempupload", function() {
			"use strict";
			var jsonString;
			var file = this.files[0];
			var reader = new FileReader();
			
			reader.readAsText(file);
			reader.onloadend = function() {
				jsonString = reader.result;
				theModel = theModel.newFromJSON( jsonString );
				$( "#drawme" ).html( theModel.getHTML() );
				$( "#tempupload" ).remove();
			}	
		});
						
	});
	


	/*
	$( "body" ).on("change", "#tempupload", function() {
		var jsonString;
		var objJSON;
		var file = this.files[0];
		var reader = new FileReader();
		console.log("here2");

		reader.onloadend = function(event) {
			jsonString = reader.result;
			objJSON = JSON.parse(jsonString);
			theModel = theModel.newFromJSON(jsonString);
		}

		reader.readAsText(file);

		console.log("here!");
		console.log(theModel);


	});*/
	

	
</script>

</body>

</html>
