<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Box Model Tester</title>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" rel="stylesheet">   
    <link href="css/smstile-framework.css" type="text/css" rel="stylesheet">
    <!-- <link href="css/smstile-framework.min.css" type="text/css" rel="stylesheet"> -->
    <link href="css/custom.css" type="text/css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">	
</head>

<body id="button-builder">

<button class="func-save-file">SAVE</button>
<button class="func-load-file">LOAD</button>
	
<script 
	src="https://code.jquery.com/jquery-2.2.4.min.js" 
	integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" 
	crossorigin="anonymous"></script>

<script 
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
	integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
	crossorigin="anonymous"></script>
	
<script src="scripts/commonfunctions.js"></script>
<script src="scripts/menuclass.js"></script>
<script src="scripts/menuitemclass.js"></script>	

<script>

	var theModel = Menu.new();
	
	theModel.addItem("test");
	theModel.addItem("test 2");
	theModel.textBold(true).useIcons(true).textAlign("text-right");
	
	theModel.item(0).label("This is a label").iconClass("fa-envelope-open");
	theModel.item(1).url("http://google.com").linkTitle("Whaddaya Want").newWindow(true);
	theModel.iconPlacement("right");
	
	console.log(theModel);

	var theJSON = theModel.getJSON();
	
	console.log( theJSON );

	var aTest = Menu.newFromJSON(theJSON);
	console.log(aTest);
	
	document.write(aTest.getHTML());
	
// Untested - should create a json file of the box and download file.
$( ".func-save-file" ).click( function() {
	"use strict";
	
	var jsonData = theModel.getJSON();
	var jsonPretty = JSON.stringify( JSON.parse(jsonData), null, '\t' );
	var blob = new Blob( [ jsonPretty ], { type: "application/octet-stream" });
	var url = URL.createObjectURL( blob );
	var filename = theModel.getClassName() + " " + getDatestamp() + ".json";
	
	$( ".func-save-file" ).after( '<a id="templink" download="' + filename + '" href="' + url + '"></a>' );
	$( "#templink" )[0].click();
	$( "#templink" ).remove();
});
	

</script>
	
</body>
</html>
