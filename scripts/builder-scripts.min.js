var inlineBool=!1;function copyToClipboard(e){"use strict";var t=$("<input>");$("body").append(t),t.val($(e).text().trim()).select(),document.execCommand("copy"),t.remove()}function getPortaitHTML(){"use strict";return'<div class="sms-tile sms-layout-portrait sms-text-light"><a href="#" class="sms-url"></a><div class="sms-tile-text">This is your tile text.</div></div>'}function processDropShadow(){"use strict";$("#wrapper .sms-tile").toggleClass("sms-shadow"),displayTileOutput()}function toggleImageConfigs(){"use strict";$("#imageConfigurables").slideToggle(200),processImage()}function toggleCustomColorConfigs(){"use strict";$("#customColorConfigurables").slideToggle(200),$("#sms-form-tile-color").toggleClass("disabled"),processCustomColor()}function toggleRibbonConfigs(){"use strict";$("#ribbonConfigurables").slideToggle(200),processRibbon()}function toggleGoBtnConfigs(){"use strict";$("#gobtnConfigurables").slideToggle(200),processGoBtn()}function toggleURLConfigs(){"use strict";$("#urlConfigurable").slideToggle(200),processUseURL()}function processLayout(){"use strict";var e=$("#sms-form-tile-layout").val();$("#wrapper .sms-tile").removeClass(function(e,t){return(t.match(/(^|\s)sms-layout-\S+/g)||[]).join(" ")}),$("#wrapper .sms-tile").addClass(e),processColor(),processRibbon(),processGoBtn(),processImage(),displayTileOutput()}function processText(){"use strict";var e=$("#sms-form-tile-text-value").val().replace(/\n/g,"<br>");""===e&&(e="This is your tile text."),$("#wrapper .sms-tile-text").html(e),processGoBtn()}function processImage(){"use strict";var e=$("#sms-form-tile-image-0").prop("checked"),t=$("#sms-form-tile-layout").val();if($("#wrapper .sms-tile-img").remove(),e){var s,r="",o=0,i=0,l="";switch(r=$("#sms-form-tile-image-url").val(),l=$("#sms-form-tile-image-alt").val(),t){case"sms-layout-portrait":case"sms-layout-portrait-200":o=150,i=100;break;case"sms-layout-portrait-216":o=180,i=120;break;case"sms-layout-portrait-220":o=150,i=145;break;case"sms-layout-portrait-220i":o=200,i=132;break;case"sms-layout-portrait-270":o=225,i=152;break;case"sms-layout-portrait-240":o=200,i=134;break;case"sms-layout-portrait-160":o=132,i=89;break;case"sms-layout-portrait-192":o=160,i=107;break;case"sms-layout-small-banner":o=400,i=160;break;case"sms-layout-hero-tile":o=400,i=300;break;default:o=180,i=175}""===r&&(r="https://picsum.photos/"+o+"/"+i+"/?random"),""===l&&(l="A generic picture"),s='<img src="'+r+'" width="'+o+'" height="'+i+'" alt="'+l+'" class="sms-tile-img" />',$("#wrapper .sms-tile-text").before(s)}}function processURL(){"use strict";var e=$("#sms-form-tile-url-value").val(),t=$("#sms-form-tile-url-title-value").val().trim();""===e&&(e="#"),$("#wrapper .sms-url").attr("href",e),""===t?$("#wrapper .sms-url").removeAttr("title"):$("#wrapper .sms-url").attr("title",t)}function processUseURL(){"use strict";$("#sms-form-tile-url-0").prop("checked")?($(".sms-tile").prepend('<a href="#" class="sms-url"></a>'),processURL()):$(".sms-url").remove()}function processRibbon(){"use strict";var e=$("#sms-form-tile-ribbon-0").prop("checked");if($("#wrapper .sms-ribbon").remove(),e){var t,s,r,o="";o=$("#sms-form-tile-ribbon-text").val(),t=$("#sms-form-tile-ribbon-color").val(),s=$("input[name=sms-form-tile-ribbon-location]:checked").val(),""===o&&(o="New!"),r='<div class="sms-ribbon"><span>'+o+"</span></div>",$("#wrapper .sms-tile-text").before(r),$("#wrapper .sms-layout-landscape").append(r),$("#wrapper .sms-ribbon").addClass(t),$("#wrapper .sms-ribbon").addClass(s)}}function processGoBtn(){"use strict";var e=$("#sms-form-tile-gobtn-0").prop("checked");if($("#wrapper .sms-go-btn").remove(),e){var t,s=$("#sms-form-tile-gobtn-text").val();""===s&&(s="Go..."),t='<span class="sms-go-btn">'+s+"</span>",$("#wrapper .sms-tile-text").append(t)}}function processTriangles(){"use strict";var e=$("input[name=sms-form-tile-triangle]:checked").val();$("#wrapper .sms-tile").removeClass("sms-tri").removeClass(function(e,t){return(t.match(/(^|\s)sms-tri-\S+/g)||[]).join(" ")}),"sms-tri-none"===e?($("#wrapper .sms-tile").removeClass("sms-tri-bgcolor-white sms-tri-bgcolor-offwhite"),$("#sms-form-tile-tri-color-0").prop("checked",!0),$("input[name=sms-form-tile-tri-color]").prop("disabled",!0)):($("#wrapper .sms-tile").addClass(e).addClass("sms-tri"),$("input[name=sms-form-tile-tri-color]").prop("disabled",!1),processTriColor())}function processTriColor(){"use strict";var e=$("input[name=sms-form-tile-tri-color]:checked").val();$("#wrapper .sms-tile").removeClass("sms-tri-bgcolor-white sms-tri-bgcolor-offwhite"),"sms-tri-bgcolor-natural"!==e&&$("#wrapper .sms-tile").addClass(e)}function processColor(){"use strict";var e=$("#sms-form-tile-color").val();$("#wrapper .sms-tile").removeClass(function(e,t){return(t.match(/(^|\s)sms-color-\S+/g)||[]).join(" ")}),$("#wrapper .sms-tile").addClass(e)}function processTextColor(){"use strict";var e=$("input[name=sms-form-tile-text-color]:checked").val();$("#wrapper .sms-tile").removeClass("sms-text-light sms-text-dark"),$("#wrapper .sms-tile").addClass(e),$("#wrapper .sms-box-header").removeClass("sms-text-light sms-text-dark"),$("#wrapper .sms-box-header").addClass(e)}function processTextSize(){"use strict";var e=$("input[name=sms-form-tile-text-size]:checked").val();$("#wrapper .sms-tile").removeClass("sms-text-size sms-text-big sms-text-small sms-text-very-small sms-text-very-big"),"sms-text-size"!==e&&$("#wrapper .sms-tile").addClass(e)}function processTextAlign(){"use strict";var e=$("input[name=sms-form-tile-text-align]:checked").val();$("#wrapper .sms-tile-text").removeClass("text-left text-right text-center"),$("#wrapper .sms-tile-text").addClass(e)}function processFontWeight(){"use strict";var e=$("input[name=sms-form-tile-text-weight]:checked").val();$("#wrapper .sms-tile-text").removeClass("font-weight-light font-weight-normal font-weight-bold"),$("#wrapper .sms-tile-text").addClass(e)}function displayTileOutput(){"use strict";var e=$("#wrapper").html();$("#output").text(e)}function processCustomColor(){"use strict";var e=$("#sms-form-custom-color-toggle-0").prop("checked"),t=$("#sms-form-custom-color").val(),s="",r="";if(e?$("#wrapper .sms-tile").addClass("sms-custom-color"):$("#wrapper .sms-tile").removeClass("sms-custom-color"),void 0!==(s=$("#wrapper .sms-tile").attr("style"))&&0!==s.length){var o=s.indexOf("background-color");if(o>-1){var i=s.indexOf(";",o);r=s.slice(0,o),i>-1&&(r+=s.slice(i+1))}}e&&t.length>0&&(r+="background-color:"+t+";"),0===r.length?$("#wrapper .sms-tile").removeAttr("style"):$("#wrapper .sms-tile").attr("style",r)}function runInlineConverter(){"use strict";var e=$("#wrapper .sms-tile").css("top"),t=$("#wrapper .sms-tile").css("left");computedStyleToInlineStyle(document.querySelector("#wrapper .sms-tile"),{recursive:!0,properties:["background-color","box-shadow","-moz-box-shadow","-webkit-box-shadow","box-sizing","-moz-box-siding","-webkit-box-sizing","color","display","float","font-weight","font-size","height","line-height","margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","position","top","right","bottom","left","width","z-index"]});for(var s=$("#wrapper .sms-tile").attr("style"),r=s.split(";"),o=[],i=0;i<r.length;i++)r[i]=r[i].trim(),r[i].startsWith("float:")||r[i].startsWith("top:")||r[i].startsWith("left:")||r[i].startsWith("bottom:")||r[i].startsWith("right:")||o.push(r[i]);s=o.join("; "),$("#wrapper .sms-tile").attr("style",s),displayTileOutput(),inlineBool=!0,$("#wrapper").children("div").css({float:"left",top:e,left:t})}function resetTile(){"use strict";processLayout(),processText(),processURL(),processTextColor(),processTextSize(),processTextAlign(),processFontWeight(),displayTileOutput()}$(function(){"use strict";$(".configurable").hide(),$("#urlConfigurable").show(),$("#wrapper").html(getPortaitHTML()),resetTile()}),$("#tilebuilder-form select, #tilebuilder-form textarea, #tilebuilder-form input").focus(function(){"use strict";inlineBool&&($("#wrapper").html(getPortaitHTML()),resetTile())}),$("#sms-form-tile-image-0").change(function(){"use strict";toggleImageConfigs(),displayTileOutput()}),$("#sms-form-custom-color-toggle-0").change(function(){"use strict";toggleCustomColorConfigs(),displayTileOutput()}),$("#sms-form-tile-ribbon-0").change(function(){"use strict";toggleRibbonConfigs(),displayTileOutput()}),$("#sms-form-tile-gobtn-0").change(function(){"use strict";toggleGoBtnConfigs(),displayTileOutput()}),$("#sms-form-tile-url-0").change(function(){"use strict";toggleURLConfigs(),displayTileOutput()}),$("#sms-form-tile-layout").change(function(){"use strict";processLayout(),displayTileOutput()}),$("#sms-form-tile-text-value").on("change keyup paste",function(){"use strict";processText(),displayTileOutput()}),$("input[name=sms-form-tile-text-align]").change(function(){"use strict";processTextAlign(),displayTileOutput()}),$("input[name=sms-form-tile-text-weight]").change(function(){"use strict";processFontWeight(),displayTileOutput()}),$("#sms-form-tile-url-value").on("change keyup paste",function(){"use strict";processURL(),displayTileOutput()}),$("#sms-form-tile-url-title-value").on("change keyup paste",function(){"use strict";processURL(),displayTileOutput()}),$("#sms-form-tile-shadow-0").change(function(){"use strict";processDropShadow()}),$("#sms-form-tile-image-0").change(toggleImageConfigs()),$("#sms-form-tile-image-url").on("change paste",function(){"use strict";processImage(),displayTileOutput()}),$("#sms-form-tile-image-alt").on("change paste",function(){"use strict";processImage(),displayTileOutput()}),$("#sms-form-custom-color-toggle-0").change(toggleCustomColorConfigs()),$("#sms-form-custom-color").keypress(function(e){"use strict";13===e.which&&(processCustomColor(),displayTileOutput())}).blur(processCustomColor()),$("input[name=sms-form-tile-triangle]").change(function(){"use strict";processTriangles(),displayTileOutput()}),$("input[name=sms-form-tile-tri-color]").change(function(){"use strict";processTriColor(),displayTileOutput()}),$("#sms-form-tile-color").change(function(){"use strict";processColor(),displayTileOutput()}),$("input[name=sms-form-tile-text-color]").change(function(){"use strict";processTextColor(),displayTileOutput()}),$("input[name=sms-form-tile-text-size]").change(function(){"use strict";processTextSize(),displayTileOutput()}),$("#sms-form-tile-gobtn-0").change(toggleGoBtnConfigs()),$("#sms-form-tile-gobtn-text").change(function(){"use strict";processGoBtn(),displayTileOutput()}),$("#sms-form-tile-ribbon-0").change(toggleRibbonConfigs()),$("#sms-form-tile-ribbon-text").on("change keyup paste",function(){"use strict";processRibbon(),displayTileOutput()}),$("#sms-form-tile-ribbon-color").change(function(){"use strict";processRibbon(),displayTileOutput()}),$("input[name=sms-form-tile-ribbon-location]").change(function(){"use strict";processRibbon(),displayTileOutput()}),$("input[name=sms-form-fix-for-older-moodle]").change(function(){"use strict";displayTileOutput()}),$("input[name=sms-form-header-text-color]").change(function(){"use strict";displayTileOutput()}),$("#myTileBuilderModal").on("shown.bs.modal",function(){"use strict";$("#SMSImportTextarea").focus()}),$("#importTile").click(function(){"use strict";var e,t;e=$("#myTileBuilderModal").find("#SMSImportTextarea").val(),t=$("#wrapper").html(),$("#wrapper").html(e),$("#wrapper div").hasClass("sms-tile")||$("#wrapper").html(t),$(":checkbox").removeAttr("checked"),$(".configurable").slideUp(200);var s=$("#wrapper .sms-tile-text").clone().children().remove().end().text().trim();if($("#sms-form-tile-text-value").text(s),$("#wrapper .sms-url").length){$("#sms-form-tile-url-value").text($(".sms-url").attr("href"));var r=$("#wrapper .sms-url").attr("title");void 0!==r&&!1!==r&&$("#sms-form-tile-url-title-value").text($(".sms-url").attr("title"))}$("#wrapper img").length&&($("#sms-form-tile-image-0").prop("checked",!0),$("#imageConfigurables").slideDown(200),$("#sms-form-tile-image-url").val($("#wrapper .sms-tile-img").attr("src")),$("#sms-form-tile-image-alt").val($("#wrapper .sms-tile-img").attr("alt"))),$("#wrapper div").hasClass("sms-shadow")&&$("#sms-form-tile-shadow-0").attr("checked","checked"),$("#wrapper .sms-go-btn").length&&($("#sms-form-tile-gobtn-0").prop("checked",!0),$("#gobtnConfigurables").slideDown(200),$("#sms-form-tile-gobtn-text").val($("#wrapper .sms-go-btn").text()));var o=$("#wrapper .sms-tile").attr("class").match(/sms-layout-\S+/g);$("#sms-form-tile-layout option").each(function(){$(this).removeAttr("selected"),$(this).attr("value")==o&&$(this).attr("selected","selected")});var i=$("#wrapper .sms-tile").attr("class").match(/sms-color-\S+/g);if($("#sms-form-tile-color option").each(function(){$(this).removeAttr("selected"),$(this).attr("value")==i&&$(this).attr("selected","selected")}),$("#wrapper .sms-tile-text.text-center").length?($("#sms-form-tile-text-align-0").prop("checked",!1),$("#sms-form-tile-text-align-2").prop("checked",!1),$("#sms-form-tile-text-align-1").prop("checked",!0)):$("#wrapper .sms-tile-text.text-right").length?($("#sms-form-tile-text-align-0").prop("checked",!1),$("#sms-form-tile-text-align-1").prop("checked",!1),$("#sms-form-tile-text-align-2").prop("checked",!0)):($("#sms-form-tile-text-align-1").prop("checked",!1),$("#sms-form-tile-text-align-2").prop("checked",!1),$("#sms-form-tile-text-align-0").prop("checked",!0)),$("#wrapper .sms-text-dark").length?($("#sms-form-tile-text-color-0").prop("checked",!1),$("#sms-form-tile-text-color-1").prop("checked",!0)):($("#sms-form-tile-text-color-0").prop("checked",!0),$("#sms-form-tile-text-color-1").prop("checked",!1)),$("#wrapper .sms-text-big").length?($("#sms-form-tile-text-size-0").prop("checked",!1),$("#sms-form-tile-text-size-1").prop("checked",!0),$("#sms-form-tile-text-size-4").prop("checked",!1),$("#sms-form-tile-text-size-2").prop("checked",!1),$("#sms-form-tile-text-size-3").prop("checked",!1)):$("#wrapper .sms-text-very-big").length?($("#sms-form-tile-text-size-0").prop("checked",!1),$("#sms-form-tile-text-size-1").prop("checked",!1),$("#sms-form-tile-text-size-4").prop("checked",!0),$("#sms-form-tile-text-size-2").prop("checked",!1),$("#sms-form-tile-text-size-3").prop("checked",!1)):$("#wrapper .sms-text-small").length?($("#sms-form-tile-text-size-0").prop("checked",!1),$("#sms-form-tile-text-size-1").prop("checked",!1),$("#sms-form-tile-text-size-4").prop("checked",!1),$("#sms-form-tile-text-size-2").prop("checked",!0),$("#sms-form-tile-text-size-3").prop("checked",!1)):$("#wrapper .sms-text-very-small").length?($("#sms-form-tile-text-size-0").prop("checked",!1),$("#sms-form-tile-text-size-1").prop("checked",!1),$("#sms-form-tile-text-size-4").prop("checked",!1),$("#sms-form-tile-text-size-2").prop("checked",!1),$("#sms-form-tile-text-size-3").prop("checked",!0)):($("#sms-form-tile-text-size-0").prop("checked",!0),$("#sms-form-tile-text-size-1").prop("checked",!1),$("#sms-form-tile-text-size-4").prop("checked",!1),$("#sms-form-tile-text-size-2").prop("checked",!1),$("#sms-form-tile-text-size-3").prop("checked",!1)),$("#wrapper .sms-ribbon").length){$("#sms-form-tile-ribbon-0").prop("checked",!0),$("#ribbonConfigurables").slideDown(200),$("#sms-form-tile-ribbon-text").val($("#wrapper .sms-ribbon span").text());var l=$("#wrapper .sms-ribbon").attr("class").match(/sms-ribbon-color-\S+/g);$("#sms-form-tile-ribbon-color option").each(function(){$(this).removeAttr("selected"),$(this).attr("value")==l&&$(this).attr("selected","selected")}),$("#wrapper .sms-ribbon-bl").length?($("#sms-form-tile-ribbon-location-0").prop("checked",!1),$("#sms-form-tile-ribbon-location-1").prop("checked",!0)):($("#sms-form-tile-ribbon-location-0").prop("checked",!0),$("#sms-form-tile-ribbon-location-1").prop("checked",!1))}if($("#wrapper .sms-custom-color").length){var a="#ccaa00",m=$("#wrapper .sms-tile").attr("style");if(void 0!==m&&0!==m.length){var c=(m=m.toLowerCase()).indexOf("background-color");if(c>-1){var p=m.indexOf(";",c);a=(a=(a=p>-1?m.slice(c,p):m.slice(c)).replace("background-color:","")).trim()}}$("#wrapper .sms-tile").removeAttr("style").find("*").removeAttr("style"),$("#wrapper .sms-tile").attr({style:"background-color:"+a}),$("#sms-form-custom-color-toggle-0").prop("checked",!0),$("#customColorConfigurables").slideDown(200),$("#sms-form-custom-color").val(a),processCustomColor()}else $("#wrapper .sms-tile").removeAttr("style").find("*").removeAttr("style");displayTileOutput(),$("#myTileBuilderModal").modal("hide")});